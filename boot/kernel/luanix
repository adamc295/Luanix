--[[
	Luanix kernel
	--------------------
	Used to load the system
]]--

-- Variables
local version = "Luanix PRE_ALPHA_0_0_1"

print("Welcome to "..version.."!")
sleep(2)

local bootimg = paintutils.loadImage("/etc/init/background.nfp")
if not bootimg then
	printError("bootimg not found!")
	sleep(2)
	os.reboot()
end

local luanix = {}

function luanix.panicPrint(prog, message)
	local origcol = term.getTextColour()
	term.setTextColour(colors.red)
	print("["..prog.."] "..tostring(message))
	term.setTextColour(origcol)
end

function luanix.panic(msg)
	luanix.panicPrint("Panic", msg)
	sleep(2)
	os.reboot()
end


print("Control goes to /sys/init!")
os.run({}, "/sys/init", {})

luanix.panic("Wait, what?")